# IoT移动手机应用利用
本章，我们将会覆盖一下内容：
* 获取IoT移动应用
* 反编译Android应用
* 解密iOS应用
* 使用MobSF进行静态分析
* 使用idb分析iOS数据存储
* 分析Android数据存储
* 进行动态分析测试

在消费者中和一些商业物联网设备中，常常需要一个移动应用来完成一个目标。例如，在车辆管理基础设施中，一个移动应用可能给服务器汇报数据，或者应用会被委托去控制车辆引擎的启动。在每一个案例中，数据可能被存储在移动应用中，并被操作完成意想不到的动作。为了开始发现漏洞和逆向移动应用，在第三章讨论的固件分析和利用方法同样适用于移动空间。首先必须获取到应用，然后，可以静态分析、动态分析应用，也可以完成重打包。本章将会辅助介绍利用领域中发现的通用漏洞来评估物联网移动应用。

## 简介
在移动应用安全测试中， 有一个四阶段方法，可以用以下方式分类：
* 应用映射：应用程序映射与应用程序的逻辑和应用程序的业务功能有关。可以把应用映射想成收集下一阶段要是有的应用信息收集。
* 客户端攻击： 客户端攻击与存储在客户端应用的数据有关，也和客户端对数据的操作有关。
* 网络攻击： 网络攻击与网络层攻击有关，如SSL/TLS或者可能XMPP协议数据。
* 服务端攻击：服务端攻击应用于API漏洞和API测试导致的后端服务器错误配置。

如果通过白盒或黑盒视角进行测试，这种方法可能会有所不同。从白盒和黑盒测试视角都相关的是移动应用安全验证标准（MASVS)。MASVS旨在建立一个安全需求框架来设计，开发和测试移动应用，包括Android和iOS[https://www.owasp.org/images/f/fe/MASVS_v0.9.3.pdf](https://www.owasp.org/images/f/fe/MASVS_v0.9.3.pdf)。除此之外，常见漏洞的趋势和模式已经被识别并转换到一个检查表来辅助MASVS，开发者和测试者可以遵从它来完成应用评估[https://www.owasp.org/images/1/1b/Mobile_App_Security_Checklist_0.9.3.xlsx](https://www.owasp.org/images/1/1b/Mobile_App_Security_Checklist_0.9.3.xlsx)。检查表也包含了到OWASP中移动应用测试指南的链接，该指南虽然仍然在进行中，但是是个成熟的阶段。MASVS和检查表指出IoT空间中很多潜在的漏洞：
* 硬编码敏感数据
* 详细日志
* session管理弱点
* 缓存敏感数据
* 不安全的数据存储
* 数据泄露
* API通信

由于应用类型（原生的和混合的），这些常见的漏洞类型都会发生，但是也会由于辣鸡的代码实践引入。本章中，许多列出的常见漏洞都可以在两个移动平台中演示。应用这些方法和检查表超出了本书的范围，然而，当攻击物联网移动应用时，使用它们作为参考是个非常好的注意。简而言之，我们将会按照静态分析、运行时动态分析的路径来进行。一开始，我们需要获取目标应用程序来开始测试物联网移动应用的过程。